<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Historique
    </ion-title>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="tabs/tab1"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

</ion-header>

<ion-content class="ion-padding">
 
  <ion-searchbar color="dark" placeholder="entrez nom, montant d'une facture" [(ngModel)]="searchTerm"
  autocorrect="on" animated="true"
  inputmode="decimal" type="decimal"  
  [debounce]="250" showCancelButton="focus"></ion-searchbar>

 
  <div class="historique">
    <ion-list-header>
     <ion-label color="dark"> Vos dernières opérations
     </ion-label>
    </ion-list-header>
    
   
  
    <ion-accordion-group expand="inset">
      <ion-accordion value="first">
        <ion-item slot="header" color="light">
          <ion-header>Factures EDM</ion-header>
        </ion-item>
       
          <div class="ion-padding" slot="content" class="pdf-container" id="content" *ngFor="let data of Edmdata|async | filter:searchTerm">
           
           
            <table class="table table-bordered table-dark">
              <thead>
                <tr>
                 
                  <th scope="col">Date </th>
                  <th scope="col">N° Compteur </th>
                  <th scope="col">Montant </th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  
                  <td>{{data.date}}</td>
                  <td>{{data.ncompteuruser}}</td>
                  <td>{{data.montantpaye}}</td>
                </tr>
                <tr>
               
                  
                </tr>
                <tr>
                  
                  <td colspan="2">Reliquat</td>
                  <td>0</td>
                </tr>
              </tbody>
            </table>
            <ion-button (click)="getEdmPdf()">
              <ion-icon slot="icon-only" name="download"></ion-icon>
              Telecharger
            </ion-button>
 
        </div>
      </ion-accordion>

      <ion-accordion value="second">
        <ion-item slot="header" color="light">
          <ion-header>Factures SOMAGEP</ion-header>
        </ion-item>
        
        <div class="ion-padding" slot="content" class="pdf-container" id="content" #content *ngFor="let data of Somagepdata|async | filter:searchTerm">
           
           
          <table class="table table-bordered table-dark" *ngIf="data.userId === userId">
            <thead>
              <tr>
               
                <th scope="col">Date </th>
                <th scope="col">N° Compteur </th>
                <th scope="col">Montant </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                
                <td>{{data.date}}</td>
                <td>{{data.ncompteuruser}}</td>
                <td>{{data.montantpaye}}</td>
              </tr>
              <tr>
             
                
              </tr>
              <tr>
                
                <td colspan="2">Reliquat</td>
                <td>0</td>
              </tr>
            </tbody>
          </table>
<ion-button (click)="getSomagepPdf()" *ngIf="data.userId === userId">
  <ion-icon slot="icon-only" name="download"></ion-icon>
  Telecharger
</ion-button>
      </div>
       
        
      </ion-accordion>

      <ion-accordion value="three">
        <ion-item slot="header" color="light">
          <ion-header>Factures ISAGO</ion-header>
        </ion-item>
        
        <div class="ion-padding" slot="content" class="pdf-container" id="content" #content *ngFor="let data of Isagodata|async | filter:searchTerm">
           
           
          <table class="table table-bordered table-dark">
            <thead>
              <tr>
               
                <th scope="col">Date </th>
                <th scope="col">N° Compteur </th>
                <th scope="col">Montant </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                
                <td>{{data.date}}</td>
                <td>{{data.ncompteuruser}}</td>
                <td>{{data.montantpaye}}</td>
              </tr>
              <tr>
             
                
              </tr>
              <tr>
                
                <td colspan="2">Reliquat</td>
                <td>0</td>
              </tr>
            </tbody>
          </table>
<ion-button (click)="getIsagodataPdf()" *ngIf="data.userId === userId">
  <ion-icon slot="icon-only" name="download"></ion-icon>
  Telecharger
</ion-button>
      </div>
        
      </ion-accordion>


      <ion-accordion value="four">
        <ion-item slot="header" color="light">
          <ion-header>Abonnement Canal</ion-header>
        </ion-item>
        
        <div class="ion-padding" slot="content" class="pdf-container" id="content" #content *ngFor="let data of Canaldata|async | filter:searchTerm">
           
           
          <table class="table table-bordered table-dark">
            <thead>
              <tr>
               
                <th scope="col">Date </th>
                <th scope="col">N° Decodeur </th>
                <th scope="col">Montant </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                
                <td>{{data.date}}</td>
                <td>{{data.ndecodeur}}</td>
                <td>{{data.montantpaye}}</td>
              </tr>
              <tr>
             
                
              </tr>
              <tr>
                
                <td colspan="2">Reliquat</td>
                <td>0</td>
              </tr>
            </tbody>
          </table>
<ion-button (click)="getCanaldataPdf()" *ngIf="data.userId === userId">
  <ion-icon slot="icon-only" name="download"></ion-icon>
  Telecharger
</ion-button>
      </div>
       
        
      </ion-accordion>

      <ion-accordion value="five">
        <ion-item slot="header" color="light">
          <ion-header>Abonnement Malivision</ion-header>
        </ion-item>
        
        <div class="ion-padding" slot="content" class="pdf-container" id="content" #content *ngFor="let data of Malivisiondata|async | filter:searchTerm">
           
           
          <table class="table table-bordered table-dark">
            <thead>
              <tr>
               
                <th scope="col">Date </th>
                <th scope="col">N° Decodeur </th>
                <th scope="col">Montant </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                
                <td>{{data.date}}</td>
                <td>{{data.ndecodeur}}</td>
                <td>{{data.montantpaye}}</td>
              </tr>
              <tr>
             
                
              </tr>
              <tr>
                
                <td colspan="2">Reliquat</td>
                <td>0</td>
              </tr>
            </tbody>
          </table>
<ion-button (click)="getMalivisionPdf()" *ngIf="data.userId === userId">
  <ion-icon slot="icon-only" name="download"></ion-icon>
  Telecharger
</ion-button>
      </div>
       
        
      </ion-accordion>

      </ion-accordion-group>   
 </div>
</ion-content>

